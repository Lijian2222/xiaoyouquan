"use strict";const e=require("../../common/vendor.js"),s=require("../../common/assets.js"),t=require("../../store/job.js"),a=require("../../store/user.js"),r=require("../../store/environment.js"),u={__name:"jobContent",setup(u){const o=r.environmentStore().currentUrl,l=e.ref({});l.value.salaryStart=0,l.value.salaryEnd=0,e.onLoad((e=>{l.value=e,"null"==l.value.campus&&(l.value.campus="哈尔滨工业大学")}));const d=e.ref("收 藏");function i(){"收 藏"==d.value?(e.index.showToast({title:"收藏成功",icon:"success",duration:2e3,mask:!0,success:()=>{console.log("Toast 显示成功")}}),e.index.request({url:o+"/favorite/insert",method:"POST",data:{userId:a.userStore().userId,concerned:l.value.id,status:1,isDeleted:0}}),d.value="已收藏"):(e.index.showToast({title:"取消收藏成功",icon:"success",duration:2e3,mask:!0,success:()=>{console.log("Toast 显示成功")}}),d.value="收 藏")}const n=e.ref("立即投递");function c(){"立即投递"==n.value?(e.index.showToast({title:"投递成功",icon:"success",duration:2e3,mask:!0,success:()=>{console.log("Toast 显示成功")}}),n.value="已投递"):(e.index.showToast({title:"请不要重复投递",icon:"error",duration:2e3,mask:!0,success:()=>{console.log("Toast 显示成功")}}),n.value="立即投递"),console.log("正在查询是否投递过"),console.log(l.value.id),e.index.request({url:o+"/deliver/query",method:"POST",data:{userId:a.userStore().userId,jobId:l.value.id,isDeleted:0},success:s=>{0==s.data.data.length?e.index.request({url:o+"/deliver/insert",method:"post",data:{isDeleted:0,jobId:l.value.id,userId:a.userStore().userId}}):e.index.request({url:o+"/deliver/update",method:"post",data:{isDeleted:0,jobId:l.value.id,userId:a.userStore().userId}})},fail:e=>{reject(e)}})}return e.onMounted((()=>{e.index.request({url:o+"/deliver/query",method:"POST",data:{userId:a.userStore().userId,jobId:l.value.id,isDeleted:0},success:e=>{0==e.data.data.length?n.value="立即投递":n.value="已投递"},fail:e=>{reject(e)}}),e.index.request({url:o+"/favorite/query",method:"POST",data:{userId:a.userStore().userId,concerned:l.value.id,isDeleted:0},success:e=>{0==e.data.data.length?d.value="收 藏":d.value="已收藏"},fail:e=>{reject(e)}})})),(a,r)=>({a:e.t(l.value.jobName),b:e.t(e.unref(t.jobStore)().formatSalary(Number(l.value.salaryStart))),c:e.t(e.unref(t.jobStore)().formatSalary(Number(l.value.salaryEnd))),d:e.t(l.value.salaryNums),e:s._imports_0$3,f:e.t(l.value.position),g:s._imports_1$4,h:e.t(l.value.academicAcquired),i:s._imports_2$1,j:e.t(l.value.experienceAcquired),k:s._imports_0$2,l:e.t(l.value.nickname),m:e.t(l.value.campus),n:e.t(l.value.jobDetail),o:e.t(d.value),p:e.o(i),q:e.t(n.value),r:e.o(c)})}},o=e._export_sfc(u,[["__scopeId","data-v-f50b1fce"]]);wx.createPage(o);
