"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),o=require("../../store/post.js"),r=require("../../store/environment.js"),s=require("../../utils/throttle.js"),n={__name:"homePost",props:{id:Number,userId:Number,username:String,time:String,content:String,goodNums:Number,commentNums:Number,viewNums:Number,retweet:Number,signature:String,profilePicture:String},setup(n){const u=r.environmentStore().currentUrl,m=e.ref(!0),i=n;console.log(i.profilePicture);const d=e.ref("../../static/good.png");o.postStore().requestGood(i.id).then((e=>{e&&(d.value="../../static/good2.png")}));const a=s.throttle((function(){"../../static/good.png"==d.value?(e.index.request({url:u+"/postGood/insert",method:"POST",data:{postId:i.id,isDeleted:0,userId:1}}),d.value="../../static/good2.png",o.postStore().addGoodNums(i.id)):(e.index.request({url:u+"/postGood/delete",method:"POST",data:{postId:i.id,isDeleted:1,userId:1}}),d.value="../../static/good.png",o.postStore().subGoodNums(i.id))}),300);e.onMounted((()=>{e.index.$on("goodImageSrc",((e,t)=>{i.id==t&&(d.value=e)}))}));const p=e.computed((()=>`id=${i.id}&username=${i.username}&time=${i.time}&content=${i.content}&goodNums=${i.goodNums}&commentNums=${i.commentNums}&viewNums=${i.viewNums}&retweet=${i.retweet}&signature=${i.signature}&imageSrc=${d.value}`));return(r,s)=>({a:t._imports_0$2,b:`/pages/personHome/personHome?username=${i.username}&userId=${i.userId}`,c:e.t(n.username),d:e.t(n.time),e:t._imports_1$6,f:m.value,g:e.o((e=>m.value=!1)),h:t._imports_2$3,i:e.o((t=>e.unref(o.postStore)().notInteresting(i.id))),j:t._imports_3$1,k:e.o((e=>m.value=!0)),l:!m.value,m:e.t(n.content),n:"/pages/postContent/postContent?"+p.value,o:e.o((t=>e.unref(o.postStore)().addView(i.id))),p:d.value,q:e.o(((...t)=>e.unref(a)&&e.unref(a)(...t))),r:e.t(e.unref(o.postStore)().formatNumber(n.goodNums)),s:t._imports_4$1,t:e.t(e.unref(o.postStore)().formatNumber(n.commentNums)),v:t._imports_5,w:e.t(e.unref(o.postStore)().formatNumber(n.viewNums))})}},u=e._export_sfc(n,[["__scopeId","data-v-378101bf"]]);wx.createComponent(u);
