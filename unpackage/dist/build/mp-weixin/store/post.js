"use strict";const t=require("../common/vendor.js"),e=require("./environment.js").environmentStore().currentUrl,a=t.defineStore("post",(()=>{const a=t.ref([]),o=t.ref([]),u=t.ref([]);function d(t){const e=new Date(t.publishTime),a=`${(e.getMonth()+1).toString().padStart(2,0)}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`;t.publishTime=a}return{list1:a,list2:o,list3:u,getList1:async function(){let o=await t.index.request({url:e+"/post/query",method:"post",data:{isDeleted:0}});o.data.data.forEach(d),a.value=o.data.data},getList2:async function(){let a=await t.index.request({url:e+"/post/query",method:"post",data:{isDeleted:0,campus:"哈尔滨工业大学"}});a.data.data.forEach(d),o.value=a.data.data},getList3:async function(){let a=await t.index.request({url:e+"/post/query",method:"post",data:{isDeleted:0,currentUserId:1}});a.data.data.forEach(d),u.value=a.data.data},notInteresting:function(t){a.value=a.value.filter((e=>e.id!=t)),o.value=o.value.filter((e=>e.id!=t)),u.value=u.value.filter((e=>e.id!=t))},formatNumber:function(t){return t>=0&&t<1e3?t.toString():t>=1e3&&t<1e4?(t/1e3).toFixed(1)+"k":t>=1e4?(t/1e4).toFixed(1)+"w":"Number out of range"},requestGood:function(a){return new Promise(((o,u)=>{t.index.request({url:e+"/postGood/query",method:"POST",data:{postId:a,isDeleted:0,userId:1},success:t=>{1==t.data.data?o(!0):o(!1)},fail:t=>{u(t)}})}))},addGoodNums:function(t){a.value.map(((e,a)=>(e.id==t&&e.goodNums++,e))),o.value.map(((e,a)=>(e.id==t&&e.goodNums++,e))),u.value.map(((e,a)=>(e.id==t&&e.goodNums++,e)))},subGoodNums:function(t){a.value.map(((e,a)=>(e.id==t&&e.goodNums--,e))),o.value.map(((e,a)=>(e.id==t&&e.goodNums--,e))),u.value.map(((e,a)=>(e.id==t&&e.goodNums--,e)))},addView:function(t){a.value.map(((e,a)=>(e.id==t&&e.viewNums++,e))),o.value.map(((e,a)=>(e.id==t&&e.viewNums++,e))),u.value.map(((e,a)=>(e.id==t&&e.viewNums++,e)))}}}));exports.postStore=a;
