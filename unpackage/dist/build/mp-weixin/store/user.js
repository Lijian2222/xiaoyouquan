"use strict";const e=require("../common/vendor.js"),s=require("./environment.js").environmentStore().currentUrl,u=e.defineStore("user",(()=>{const u=[];function n(){e.index.showToast({title:"登录成功",icon:"success",duration:2e3,mask:!0,success:()=>{console.log("Toast 显示成功")}}),e.index.switchTab({url:"/pages/index/index",success:()=>{console.log("跳转成功")},fail:e=>{console.error("跳转失败",e)}})}const o=e.ref(!1),r=e.ref(-1),t=e.ref("点此建立昵称"),c=e.ref("../../static/user4.png");return{logIn:function(r,l){e.index.request({url:s+"/user/logIn",method:"post",data:{phoneNumber:r,password:l},success:e=>{const s=e.data.data;null!=s?(console.log("登录注册成功"),setTimeout(n,5e3),null!=s.campus1&&u.push({text:s.campus1,value:s.campus1}),null!=s.campus2&&u.push({text:s.campus2,value:s.campus2}),null!=s.campus3&&u.push({text:s.campus3,value:s.campus3}),null!=s.nickname&&(t.value=s.nickname),null!=s.profilePicture&&(c.value=s.profilePicture),o.value=!0):console.log("密码错误")},fail:e=>{reject(e)}})},campus:u,logInFlag:o,userId:r,username:t,userHeadPicture:c}}));exports.userStore=u;
